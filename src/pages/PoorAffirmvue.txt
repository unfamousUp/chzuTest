<template>
    <div class="PoorAffirm-container">
        <div class="PoorAffirm-bar">
            <el-tabs type="border-card">
                <el-tab-pane label="计科201">
                    <div id="footer-table-left">
                        <el-table ref="filterTable" :header-cell-style="headerCellStyle" :data="tableData"
                            style="width: 100%">
                            <el-table-column prop="stuNum" label="学号" width="120">
                            </el-table-column>
                            <el-table-column prop="stuName" label="姓名" width="120">
                            </el-table-column>
                            <el-table-column prop="sex" label="性别" width="80">
                            </el-table-column>
                            <el-table-column prop="department" label="所属院系" width="180">
                            </el-table-column>
                            <el-table-column prop="stuClass" label="行政班级" width="120">
                            </el-table-column>
                            <el-table-column prop="tel" label="联系方式" width="120">
                            </el-table-column>
                            <!-- <el-table-column prop="isPool" label="贫困生认定" width="120">
                            </el-table-column> -->
                            <el-table-column prop="tag" label="预警" width="100"
                                :filters="[{ text: '异常', value: '异常' }, { text: '严重', value: '严重' }]"
                                :filter-method="filterTag" filter-placement="bottom-end">
                                <template slot-scope="scope">
                                    <el-tag :type="scope.row.tag === '异常' ? 'warning' : 'danger'" disable-transitions>
                                        {{scope.row.tag}}</el-tag>
                                </template>
                            </el-table-column>
                            <el-table-column fixed="right" label="操作">
                                <template slot-scope="scope">
                                    <el-button @click="handleClick(scope.row)" type="text" size="small">查看</el-button>
                                    <!-- <el-button type="text" size="small">编辑</el-button> -->
                                </template>
                            </el-table-column>
                        </el-table>
                        <!-- <el-button @click="resetDateFilter">清除过滤器</el-button> -->
                        <!-- <el-button @click="clearFilter">清除所有过滤器</el-button> -->
                    </div>

                </el-tab-pane>
                <el-tab-pane label="计科202">
                    <div class="aleartTable">
                        <div class="table">

                        </div>
                    </div>
                </el-tab-pane>
                <el-tab-pane label="网工201">
                    <div class="aleartTable">
                        <div class="table">

                        </div>
                    </div>
                </el-tab-pane>
                <el-tab-pane label="网工202">
                    <div class="aleartTable">
                        <div class="table">

                        </div>
                    </div>
                </el-tab-pane>
            </el-tabs>
        </div>
    </div>
</template>

<script>
    export default {
        name: 'PoorAffirm',

        data() {
            return {
                test: {
                    "classes": "计科202",
                    "totalTimesConsumOfMonth": 1,
                    "totalConsumOfMonth": "",
                    "normalTimes": "",
                },
                myFlag: false,
                tableData: [{
                        stuNum: '2020211002',
                        stuName: '武思源',
                        sex: '男',
                        department: '计算机与信息工程学院',
                        stuClass: '计科201',
                        tel: '18170234072',
                        isPool: '非贫困生',
                        tag: '异常'
                    },
                    {
                        stuNum: '2020211042',
                        stuName: '陈屋涛',
                        sex: '男',
                        department: '计算机与信息工程学院',
                        stuClass: '计科201',
                        tel: '18170234072',
                        isPool: '非贫困生',
                        tag: '异常'
                    }, {
                        stuNum: '2020211001',
                        stuName: '贾成程',
                        sex: '男',
                        department: '计算机与信息工程学院',
                        stuClass: '计科202',
                        tel: '123456789',
                        isPool: '非贫困生',
                        tag: '严重'
                    }, {
                        stuNum: '2020211100',
                        stuName: '吴冰',
                        sex: '男',
                        department: '计算机与信息工程学院',
                        stuClass: '网工201',
                        tel: '123456789',
                        isPool: '非贫困生',
                        tag: '异常'
                    }, {
                        stuNum: '2020211106',
                        stuName: '王涛',
                        sex: '男',
                        department: '计算机与信息工程学院',
                        stuClass: '网工201',
                        tel: '123456789',
                        isPool: '非贫困生',
                        tag: '异常'
                    }, {
                        stuNum: '2020211103',
                        stuName: '徐浩',
                        sex: '男',
                        department: '计算机与信息工程学院',
                        stuClass: '网工202',
                        tel: '123456789',
                        isPool: '贫困生',
                        tag: '异常'
                    }, {
                        stuNum: '2020211107',
                        stuName: '张所',
                        sex: '男',
                        department: '计算机与信息工程学院',
                        stuClass: '网工202',
                        tel: '123456789',
                        isPool: '贫困生',
                        tag: '异常'
                    }, {
                        stuNum: '2020211121',
                        stuName: '刘韬',
                        sex: '男',
                        department: '计算机与信息工程学院',
                        stuClass: '网工202',
                        tel: '123456789',
                        isPool: '贫困生',
                        tag: '异常'
                    }
                ]
            };
        },

        mounted() {
            // this.drawTable()
        },
        methods: {
            handleClick(row) {
                this.toAleartSelfInfo()
            },
            headerCellStyle() {

            },
            filterTag(value, row) {
                return row.tag === value;
            },
            filterHandler(value, row, column) {
                const property = column['property'];
                return row[property] === value;
            },
            toAleartSelfInfo() {
                alert("toAleartSelfInfo")
                const name = "toAleartSelfInfo"
                this.$router.push({
                    name: name
                })
            }, // axios,
            testAxios() {
                this.$axios.get('http://127.0.0.1:8082/systemCore/webView/allClassesInfo').then((res) => {
                    console.log(res.data.data);
                })
            },
            testAxiosPost() {
                this.$axios.post('http://127.0.0.1:8082/systemCore/webView/consum',this.test).then((res) => {
                    console.log(res.data);
                })
            }
        },

    };
</script>

<style scoped>
    .aleartTable {
        width: 100%;
        height: 500px;
    }

    .aleartTable .table-title {
        display: flex;
        justify-content: space-between;
        width: 100%;
        height: 50px;
        color: #666;
        /* background-color: pink; */
    }

    .table-title .title {
        width: 30%;
        height: 100%;
        line-height: 50px;
        text-align: center;
        background-color: aliceblue;
    }

    .aleartTable .table {
        display: flex;
        justify-content: space-between;
        width: 100%;
        height: 300px;
        /* background-color: pink; */
        margin-top: 10px;
    }

    .table #aleartTable {
        margin-left: -150px;
        width: 1800px;
        height: 300px;
    }
</style>